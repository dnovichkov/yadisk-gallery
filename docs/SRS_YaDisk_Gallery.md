# Спецификация требований к программному обеспечению (SRS)

## Android-приложение «Просмотр фотогалереи Яндекс.Диска»

**Версия:** 1.0  
**Дата:** 21 января 2026

---

## Содержание

1. [Введение](#1-введение)
2. [Общее описание продукта](#2-общее-описание-продукта)
3. [Функциональные требования](#3-функциональные-требования)
4. [Нефункциональные требования](#4-нефункциональные-требования)
5. [Матрица трассировки требований](#5-матрица-трассировки-требований)
6. [Приложения](#6-приложения)

---

## 1. Введение

### 1.1. Назначение документа

Настоящий документ содержит полную спецификацию функциональных и нефункциональных требований к Android-приложению для просмотра фотографий и видео из каталогов Яндекс.Диска. Документ предназначен для разработчиков, тестировщиков и заказчика проекта.

### 1.2. Область применения

Приложение предназначено для пользователей, которым необходим удобный просмотр медиаконтента, хранящегося на Яндекс.Диске, включая личные фотоальбомы и публичные галереи, доступные по ссылке.

### 1.3. Определения и сокращения

| Термин | Определение |
|--------|-------------|
| API | Application Programming Interface — программный интерфейс приложения |
| OAuth 2.0 | Открытый протокол авторизации, позволяющий предоставить доступ к ресурсам без передачи логина и пароля |
| REST | Representational State Transfer — архитектурный стиль взаимодействия компонентов через HTTP |
| Превью | Уменьшенная копия изображения для предварительного просмотра (thumbnail) |
| Публичная папка | Папка на Яндекс.Диске, доступная по ссылке без авторизации |
| Кеширование | Сохранение данных локально для ускорения повторного доступа |

### 1.4. Ссылки на документы

- REST API Яндекс.Диска: https://yandex.ru/dev/disk/rest/
- OAuth для Яндекс ID: https://yandex.ru/dev/id/doc/
- Yandex Login SDK для Android: https://github.com/yandexmobile/yandex-login-sdk-android

---

## 2. Общее описание продукта

### 2.1. Перспектива продукта

Приложение является автономным Android-клиентом, взаимодействующим с облачным хранилищем Яндекс.Диск через официальный REST API. Приложение не зависит от других систем, кроме инфраструктуры Яндекса.

### 2.2. Функции продукта (обзор)

- Авторизация через OAuth 2.0 или работа с публичными папками без авторизации
- Просмотр иерархии каталогов с навигацией по вложенным папкам
- Отображение фотографий и видео в виде сетки с превью
- Полноэкранный просмотр изображений с масштабированием и перелистыванием
- Воспроизведение видеофайлов
- Локальное кеширование для офлайн-доступа и оптимизации трафика

### 2.3. Классы пользователей

| Класс | Описание |
|-------|----------|
| Авторизованный пользователь | Владелец аккаунта Яндекс, просматривающий свои личные файлы |
| Гость | Пользователь без аккаунта, просматривающий публичные папки по ссылке |

### 2.4. Операционная среда

- **Платформа:** Android 7.0 (API 24) и выше
- **Язык разработки:** Kotlin
- **Архитектура:** MVVM + Clean Architecture
- **Сетевое подключение:** Wi-Fi или мобильный интернет

### 2.5. Ограничения проектирования

- Зависимость от доступности API Яндекс.Диска
- Ограничения rate limits API (недокументированы, требуется retry-логика)
- Лимит размера файла: 1 ГБ для бесплатных аккаунтов, 50 ГБ для Яндекс 360
- Возможный throttling скорости скачивания до 128 КиБ/с

---

## 3. Функциональные требования

### 3.1. FR-01: Экран настроек

**Описание:** Приложение должно предоставлять экран настроек для конфигурации подключения к Яндекс.Диску.

**Требования:**

| ID | Требование |
|----|------------|
| FR-01.1 | Поле ввода URL публичной папки Яндекс.Диска (формат: `https://disk.yandex.ru/d/...` или `https://yadi.sk/d/...`) |
| FR-01.2 | Кнопка «Войти через Яндекс» для авторизации личного аккаунта |
| FR-01.3 | Поле выбора корневой папки для авторизованных пользователей |
| FR-01.4 | Кнопка «Сохранить» с валидацией введённых данных |
| FR-01.5 | Отображение текущего статуса подключения (подключено/не подключено) |
| FR-01.6 | Возможность выхода из аккаунта с очисткой токена |

**Приоритет:** Высокий

---

### 3.2. FR-02: Аутентификация

**Описание:** Приложение должно поддерживать два режима доступа: авторизованный и гостевой.

**Требования:**

| ID | Требование |
|----|------------|
| FR-02.1 | Реализация OAuth 2.0 через Yandex Login SDK для Android |
| FR-02.2 | Использование Authorization Code Flow с PKCE |
| FR-02.3 | Запрос scope: `cloud_api:disk.read` для доступа к файлам |
| FR-02.4 | Безопасное хранение access token в EncryptedSharedPreferences |
| FR-02.5 | Автоматическое обновление токена при истечении срока |
| FR-02.6 | Режим работы без авторизации для публичных папок (параметр `public_key`) |
| FR-02.7 | SSO через установленные приложения Яндекса (при наличии) |

**Приоритет:** Высокий

---

### 3.3. FR-03: Получение списка файлов

**Описание:** Приложение должно загружать и отображать содержимое каталогов Яндекс.Диска.

**Требования:**

| ID | Требование |
|----|------------|
| FR-03.1 | Вызов `GET /v1/disk/resources` для авторизованного доступа |
| FR-03.2 | Вызов `GET /v1/disk/public/resources` для публичных папок |
| FR-03.3 | Фильтрация по типу медиа: `media_type=image,video` |
| FR-03.4 | Постраничная загрузка (pagination) с параметрами `limit` и `offset` |
| FR-03.5 | Размер страницы по умолчанию: 50 элементов |
| FR-03.6 | Поддержка сортировки: по имени, дате создания, дате изменения, размеру |
| FR-03.7 | Запрос превью изображений с параметром `preview_size=M` (300px) |
| FR-03.8 | Получение метаданных: имя, размер, тип, дата, MD5-хеш |

**Приоритет:** Высокий

---

### 3.4. FR-04: Интерфейс каталога

**Описание:** Приложение должно отображать содержимое папки в виде сетки или списка.

**Требования:**

| ID | Требование |
|----|------------|
| FR-04.1 | Отображение элементов в виде сетки (grid) 3 колонки по умолчанию |
| FR-04.2 | Переключение между режимами сетка/список |
| FR-04.3 | Иконка папки для директорий, превью для медиафайлов |
| FR-04.4 | Отображение имени файла/папки под превью |
| FR-04.5 | Индикатор типа файла (фото/видео) на превью |
| FR-04.6 | Pull-to-Refresh для обновления списка |
| FR-04.7 | Бесконечная прокрутка (infinite scroll) для подгрузки следующих страниц |
| FR-04.8 | Skeleton-загрузчики во время загрузки данных |
| FR-04.9 | Сообщение «Папка пуста» при отсутствии элементов |

**Приоритет:** Высокий

---

### 3.5. FR-05: Просмотр медиа

**Описание:** Приложение должно обеспечивать полноэкранный просмотр фотографий и воспроизведение видео.

**Требования для изображений:**

| ID | Требование |
|----|------------|
| FR-05.1 | Полноэкранный режим просмотра (immersive mode) |
| FR-05.2 | Масштабирование жестами pinch-to-zoom (от 1x до 5x) |
| FR-05.3 | Двойной тап для быстрого зума (2x) |
| FR-05.4 | Перелистывание свайпом влево/вправо |
| FR-05.5 | Загрузка оригинала изображения при зуме выше 2x |
| FR-05.6 | Индикатор загрузки во время скачивания оригинала |
| FR-05.7 | Отображение EXIF-информации по жесту или через меню |

**Требования для видео:**

| ID | Требование |
|----|------------|
| FR-05.8 | Воспроизведение через ExoPlayer |
| FR-05.9 | Стандартные элементы управления: play/pause, seek bar, громкость |
| FR-05.10 | Поддержка форматов: MP4, MOV, AVI, MKV |
| FR-05.11 | Потоковое воспроизведение (streaming) без полной загрузки |
| FR-05.12 | Возобновление воспроизведения с последней позиции |

**Приоритет:** Высокий

---

### 3.6. FR-06: Навигация по папкам

**Описание:** Приложение должно обеспечивать навигацию по иерархии каталогов.

**Требования:**

| ID | Требование |
|----|------------|
| FR-06.1 | Открытие вложенной папки по тапу на элемент |
| FR-06.2 | Кнопка «Назад» для возврата на уровень выше |
| FR-06.3 | Хлебные крошки (breadcrumbs) для отображения текущего пути |
| FR-06.4 | Быстрый переход в любую папку из хлебных крошек |
| FR-06.5 | Системная кнопка «Назад» для навигации по истории |
| FR-06.6 | Кнопка «Домой» для возврата в корневую папку |

**Приоритет:** Высокий

---

### 3.7. FR-07: Кеширование

**Описание:** Приложение должно кешировать данные для ускорения работы и экономии трафика.

**Требования:**

| ID | Требование |
|----|------------|
| FR-07.1 | Кеширование превью изображений (библиотека Coil) |
| FR-07.2 | Кеширование оригиналов просмотренных изображений |
| FR-07.3 | Кеширование списков файлов с TTL 5 минут |
| FR-07.4 | Двухуровневый кеш: память + диск |
| FR-07.5 | Автоматическая очистка по LRU при превышении лимита |
| FR-07.6 | Настройка максимального размера кеша (по умолчанию 500 МБ) |
| FR-07.7 | Кнопка «Очистить кеш» в настройках с отображением размера |
| FR-07.8 | Проверка актуальности по MD5-хешу файла |

**Приоритет:** Средний

---

### 3.8. FR-08: Обработка ошибок

**Описание:** Приложение должно корректно обрабатывать и отображать ошибки.

**Требования:**

| ID | Требование |
|----|------------|
| FR-08.1 | Отображение понятных сообщений об ошибках сети |
| FR-08.2 | Обработка ошибки 401 — перенаправление на авторизацию |
| FR-08.3 | Обработка ошибки 403 — сообщение об ограничении доступа |
| FR-08.4 | Обработка ошибки 404 — сообщение «Ресурс не найден» |
| FR-08.5 | Обработка ошибки 429 — exponential backoff и retry |
| FR-08.6 | Обработка ошибки 503 — сообщение о недоступности сервиса |
| FR-08.7 | Кнопка «Повторить» для всех типов ошибок |
| FR-08.8 | Автоматический retry при восстановлении соединения |
| FR-08.9 | Graceful degradation — показ кешированных данных при офлайн |

**Приоритет:** Высокий

---

## 4. Нефункциональные требования

### 4.1. NFR-01: Производительность

| ID | Требование | Метрика |
|----|------------|---------|
| NFR-01.1 | Время холодного запуска приложения | ≤ 2 секунды |
| NFR-01.2 | Время загрузки списка из 50 элементов | ≤ 3 секунды (Wi-Fi) |
| NFR-01.3 | Время отображения превью после загрузки | ≤ 100 мс |
| NFR-01.4 | Частота кадров при прокрутке галереи | ≥ 60 FPS |
| NFR-01.5 | Время открытия полноэкранного просмотра | ≤ 500 мс (из кеша) |
| NFR-01.6 | Потребление памяти в режиме галереи | ≤ 200 МБ |
| NFR-01.7 | Задержка отклика на жесты масштабирования | ≤ 16 мс |

---

### 4.2. NFR-02: Безопасность

| ID | Требование |
|----|------------|
| NFR-02.1 | Хранение OAuth-токенов в EncryptedSharedPreferences с AES-256 |
| NFR-02.2 | Все сетевые запросы только через HTTPS (TLS 1.2+) |
| NFR-02.3 | Реализация Certificate Pinning для API Яндекса |
| NFR-02.4 | Очистка чувствительных данных из памяти после использования |
| NFR-02.5 | Запрет скриншотов на экране авторизации (FLAG_SECURE) |
| NFR-02.6 | Обфускация кода с помощью R8/ProGuard |
| NFR-02.7 | Отсутствие логирования токенов и персональных данных в Release |

---

### 4.3. NFR-03: Надёжность

| ID | Требование |
|----|------------|
| NFR-03.1 | Приложение не должно аварийно завершаться (crash rate < 0.1%) |
| NFR-03.2 | Корректная работа при потере и восстановлении сети |
| NFR-03.3 | Сохранение состояния при смене конфигурации (поворот экрана) |
| NFR-03.4 | Корректное восстановление после Process Death |
| NFR-03.5 | Exponential backoff для retry-запросов (макс. 5 попыток) |
| NFR-03.6 | Таймаут сетевых запросов: connect 10с, read 30с |

---

### 4.4. NFR-04: Удобство использования (UX)

| ID | Требование |
|----|------------|
| NFR-04.1 | Соответствие Material Design 3 guidelines |
| NFR-04.2 | Поддержка тёмной и светлой темы (следование системным настройкам) |
| NFR-04.3 | Поддержка Dynamic Colors на Android 12+ |
| NFR-04.4 | Доступность: минимальный размер touch-target 48dp |
| NFR-04.5 | Поддержка TalkBack для людей с нарушениями зрения |
| NFR-04.6 | Контрастность текста по WCAG 2.1 AA (≥ 4.5:1) |
| NFR-04.7 | Анимации и переходы для визуальной обратной связи |
| NFR-04.8 | Локализация: русский и английский языки |

---

### 4.5. NFR-05: Совместимость

| ID | Требование |
|----|------------|
| NFR-05.1 | Минимальная версия Android: 7.0 (API 24) |
| NFR-05.2 | Целевая версия Android: 14 (API 34) |
| NFR-05.3 | Поддержка экранов от 4.5" до 12" (телефоны и планшеты) |
| NFR-05.4 | Адаптивная вёрстка для альбомной и портретной ориентации |
| NFR-05.5 | Поддержка edge-to-edge дизайна и вырезов в экране |
| NFR-05.6 | Корректная работа на устройствах без Google Play Services |

---

### 4.6. NFR-06: Сопровождаемость

| ID | Требование |
|----|------------|
| NFR-06.1 | Покрытие unit-тестами бизнес-логики ≥ 80% |
| NFR-06.2 | UI-тесты ключевых сценариев (Espresso) |
| NFR-06.3 | Документирование публичных API (KDoc) |
| NFR-06.4 | Соблюдение Kotlin coding conventions |
| NFR-06.5 | CI/CD пайплайн для автоматической сборки и тестирования |
| NFR-06.6 | Версионирование по Semantic Versioning (MAJOR.MINOR.PATCH) |

---

## 5. Матрица трассировки требований

Связь функциональных требований с эндпоинтами API Яндекс.Диска:

| Требование | Эндпоинт API | Метод |
|------------|--------------|-------|
| FR-02 | oauth.yandex.ru | OAuth 2.0 Authorization Code + PKCE |
| FR-03.1 | `/v1/disk/resources` | GET (Authorization: OAuth token) |
| FR-03.2 | `/v1/disk/public/resources` | GET (public_key parameter) |
| FR-05.5 | `/v1/disk/resources/download` | GET → временная ссылка |
| FR-05.5 | `/v1/disk/public/resources/download` | GET (для публичных файлов) |

---

## 6. Приложения

### 6.1. Рекомендуемый технологический стек

| Компонент | Технология |
|-----------|------------|
| Язык | Kotlin 1.9+ |
| UI Framework | Jetpack Compose + Material 3 |
| Архитектура | MVVM + Clean Architecture |
| DI | Hilt |
| Networking | Retrofit 2 + OkHttp 4 + Kotlinx Serialization |
| Image Loading | Coil |
| Video Player | ExoPlayer (Media3) |
| Async | Kotlin Coroutines + Flow |
| Local Storage | DataStore + Room (для кеша метаданных) |
| Auth SDK | Yandex Login SDK 3.x |
| Testing | JUnit 5, MockK, Turbine, Espresso |

---

### 6.2. Структура пакетов (рекомендация)

```
com.example.yadiskgallery/
├── data/
│   ├── api/           # Retrofit interfaces
│   ├── repository/    # Repository implementations
│   ├── cache/         # Cache managers
│   └── model/         # Data models
├── domain/
│   ├── model/         # Domain entities
│   ├── repository/    # Repository interfaces
│   └── usecase/       # Use cases
├── presentation/
│   ├── auth/          # Auth screens
│   ├── gallery/       # Gallery screens
│   ├── viewer/        # Media viewer
│   └── settings/      # Settings screens
└── di/                # Hilt modules
```

---

## История изменений

| Версия | Дата | Автор | Изменения |
|--------|------|-------|-----------|
| 1.0 | 21.01.2026 | Claude | Первоначальная версия документа |
